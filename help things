#ตัวช่วย 2 ตัว พิมพ์ไม่ทันไม่เป็นไร
#สีเขียว คำอื่นๆตกช้าลง
#สีฟ้า เคลียร์คำที่ขึ้นอยู่บนหน้าจอ 

import pygame
import random
import sys
import time

pygame.init()

WIDTH = 800
HEIGHT = 600
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("Falling Letters Helper")

font = pygame.font.Font(None, 50)

GREEN = (0, 255, 0)
BLUE = (0, 150, 255)
BLACK = (0, 0, 0)
BG_COLOR = (30, 30, 60)

normal_speed = 2
fall_speed = normal_speed
slow_mode = False
slow_start_time = 0
slow_duration = 10  

circles = []

last_green_time = 0
last_blue_time = 0

clock = pygame.time.Clock()

def create_circle(x, y, color, letter):
    return {"x": x, "y": y, "color": color, "letter": letter, "radius": 30}

def draw_circle(circle):
    pygame.draw.circle(screen, circle["color"], (circle["x"], int(circle["y"])), circle["radius"])
    text = font.render(circle["letter"], True, BLACK)
    text_rect = text.get_rect(center=(circle["x"], int(circle["y"])))
    screen.blit(text, text_rect)

def update_circle(circle):
    circle["y"] += fall_speed

running = True
while running:
    screen.fill(BG_COLOR)
    current_time = time.time()

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

        if event.type == pygame.KEYDOWN:
            key_pressed = event.unicode.upper()

            for circle in circles[:]:
                if key_pressed == circle["letter"]:
                    if circle["color"] == GREEN:
                        slow_mode = True
                        slow_start_time = time.time()
                        fall_speed = 0.5
                    elif circle["color"] == BLUE:
                        circles.clear()
                        break
                    circles.remove(circle)

    if slow_mode and time.time() - slow_start_time >= slow_duration:
        slow_mode = False
        fall_speed = normal_speed

    if current_time - last_green_time > 30:
        letter = chr(random.randint(65, 90))
        green_circle = create_circle(random.randint(50, WIDTH - 50), 0, GREEN, letter)
        circles.append(green_circle)
        last_green_time = current_time

    if current_time - last_blue_time > 60:
        letter = chr(random.randint(65, 90))
        blue_circle = create_circle(random.randint(50, WIDTH - 50), 0, BLUE, letter)
        circles.append(blue_circle)
        last_blue_time = current_time

    for circle in circles[:]:
        update_circle(circle)
        draw_circle(circle)
        if circle["y"] - circle["radius"] > HEIGHT:
            circles.remove(circle)

    pygame.display.update()
    clock.tick(60)
